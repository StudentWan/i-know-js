{% extends '../views/layout.html' %} {% block extraheader %}
<link rel="stylesheet" href="/stylesheets/index.css"> {% endblock %} {% block content %}
<div id="search">
  <el-input placeholder="Please type a domain, e.g, baidu.com">
    <template slot="prepend">http://</template>
    <el-button v-on:click="searchWeb" slot="append" icon="search"></el-button>
  </el-input>
</div>
<template>
  <el-select v-model="values" multiple placeholder="Please choose">
    <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value">
    </el-option>
  </el-select>
</template>
<template>
  <p v-for="item in searchedValues">
    <el-alert v-if="item.isTrue===true"
    :title="item.name"
    type="success"
    description="Found this JS library!:)"
    show-icon>
    </el-alert>
    <el-alert v-else
    :title="item.name"
    type="error"
    description="Didn't find this JS library.:("
    show-icon>
  </el-alert>
  </p>
  
</template>
{% endblock %} {% block extrascript %}
<script>
  var Content = {
    delimiters: ['{$', '$}'],
    data() {
      return {
        options: [{
          value: 'jQuery',
          label: 'jQuery'
        }, {
          value: 'Vue',
          label: 'Vue'
        }, {
          value: 'React',
          label: 'React'
        }, {
          value: 'Angular',
          label: 'Angular'
        }, {
          value: 'Echarts',
          label: 'Echarts'
        }],
        values: [],
        searchedValues: {}
      }
    },
    methods: {
      searchWeb: function () {
        $.ajax({
          url: '/search',
          data: {
            values: this.values,
            url: $('.el-input__inner').val()
          },
          method: 'POST',
          success: (data) => {
            if (data.errno) {
              this.$notify.error({
                title: 'Wrong!',
                message: data.errno
              });
            } else {
              this.searchedValues = data;
              console.log(this.searchedValues);
            }
          }
        })
      }
    }
  }
  let vueContent = Vue.extend(Content)
  new vueContent().$mount('#content')
</script>
{% endblock %}